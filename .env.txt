import discord
import openai
import os
from dotenv import load_dotenv

load_dotenv()  # Memuat variabel lingkungan dari file .env

DISCORD_TOKEN = os.getenv('DISCORD_TOKEN')  # Mendapatkan token dari .env
OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')  # Mendapatkan API key dari .env

client = discord.Client()

@client.event
async def on_ready():
    print(f'Logged in as {client.user}')

@client.event
async def on_message(message):
    if message.author == client.user:
        return
    if message.content.startswith('!ask'):
        question = message.content[len('!ask '):]
        response = openai.Completion.create(
            engine="text-davinci-003", 
            prompt=question, 
            max_tokens=150
        )
        await message.channel.send(response.choices[0].text.strip())

client.run(DISCORD_TOKEN)  # Menjalankan bot menggunakan token yang valid
